/// <reference types="node" />
import { BaseDriver } from '../base-driver';
import Redis from 'ioredis';
import { Awaitable, RedisDriverOptions } from '../def';
export declare class RedisDriver extends BaseDriver {
    private options;
    createRedisClient(): Promise<Redis>;
    useTempRedisClient<T>(cb: (redis: Redis) => Awaitable<T>): Promise<T>;
    private pool;
    constructor(options: RedisDriverOptions);
    has(baseKey: string, key: string): Promise<boolean>;
    get(baseKey: string, key: string): Promise<Buffer>;
    set(baseKey: string, key: string, value: Buffer, ttl: number): Promise<void>;
    del(baseKey: string, key: string): Promise<boolean>;
    private originalKeys;
    keys(baseKey: string, prefix?: string): Promise<string[]>;
    clear(baseKey: string, prefix?: string): Promise<void>;
    private betterLock;
    lock<R>(keys: string[], cb: () => Promise<R>): Promise<R>;
    isFree(keys: string[]): Promise<boolean>;
    quitted: boolean;
    destroy(): Promise<void>;
    private getQueueKey;
    private getQueueBackupKey;
    queueLength(key: string): Promise<number>;
    queueItems(key: string): Promise<Buffer[]>;
    queueAdd(key: string, value: Buffer, prior?: boolean): Promise<void>;
    queueGather(key: string): Promise<Buffer>;
    private waitingBlockingProms;
    queueGatherBlocking(key: string): Promise<Buffer>;
    queueAck(key: string, value: Buffer): Promise<void>;
    queueResume(key: string, value: Buffer, prior?: boolean): Promise<void>;
    queueResumeAll(key: string, prior?: boolean): Promise<void>;
    queueClear(key: string): Promise<void>;
}
